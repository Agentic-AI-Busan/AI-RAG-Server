# 쿼리 확장 시스템 문서

## 개요
이 문서는 AI 서버에서 사용되는 쿼리 확장 메커니즘에 대해 설명합니다. 쿼리 확장은 사용자의 입력을 더 풍부하고 상세한 검색 쿼리로 변환하는 과정입니다.

## 쿼리 확장 시스템

### 기본 요청 모델
어트랙션과 레스토랑 검색 모두 다음 공통 필드를 사용합니다:
- `city`: 검색 대상 도시
- `startDate`: 여행 시작일
- `endDate`: 여행 종료일
- `preferActivity`: 선호하는 활동 (선택사항)
- `requirement`: 추가 요구사항 (선택사항)

### 쿼리 생성 과정
시스템은 입력 파라미터를 기반으로 동적으로 검색 쿼리를 생성합니다:

1. **여행 기간 계산**
```python
def get_days_count(self) -> int:
    return (self.endDate - self.startDate).days + 1
```

2. **쿼리 템플릿 구성**
생성된 쿼리는 다음 정보를 포함합니다:
- 도시 정보
- 여행 기간
- 여행 날짜 범위
- 선호 활동 (제공된 경우)
- 추가 요구사항 (제공된 경우)
- 추천 개수 (서비스 유형별로 다름)

### 서비스별 차이점

#### 어트랙션 서비스
- `days_count * 2`개의 어트랙션 추천
- 관광 명소와 활동 중심의 쿼리 템플릿

#### 레스토랑 서비스
- `days_count * 3`개의 레스토랑 추천
- 음식점과 요리 경험 중심의 쿼리 템플릿

## 쿼리 최적화

1. **동적 쿼리 생성**
- 사용 가능한 파라미터에 기반한 동적 쿼리 생성
- 효율적인 날짜 처리 및 검증
- 여행 기간에 따른 확장 가능한 추천 개수

2. **확장성**
- 새로운 파라미터 추가가 용이한 모듈식 설계
- 다양한 서비스 유형을 위한 공통 기본 구조
- 재사용 가능한 검증 및 파싱 로직
